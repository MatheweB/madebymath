---
interface Props {
  id: string;
  title: string;
  image: string;
}

const { id, title, image } = Astro.props;
const base = import.meta.env.BASE_URL.replace(/\/$/, '');
const imgSrc = `${base}${image}`;
---

<div class="gallery-piece" data-lightbox-trigger data-piece-title={title} data-piece-image={imgSrc}>
  <div class="gallery-piece-img-wrap">
    <img src={imgSrc} alt={title} loading="lazy" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
    <div class="gallery-piece-placeholder" style="display:none;">
      <span class="font-mono">{title}</span>
    </div>
    <div class="gallery-piece-overlay">
      <span class="font-sans">View</span>
    </div>
  </div>
  <div class="gallery-piece-caption">
    <span class="font-sans">{title}</span>
  </div>
</div>
